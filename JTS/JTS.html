<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Tracking System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
</head>

    <script>
        // Global data storage
        let applications = JSON.parse(localStorage.getItem('jobApplications') || '[]');
        let contacts = JSON.parse(localStorage.getItem('jobContacts') || '[]');
        
        // Initialize the app
        window.onload = function() {
            setDefaultDate();
            renderApplications();
            renderContacts();
            updateAnalytics();
        };
        
        function setDefaultDate() {
            document.getElementById('applicationDate').value = new Date().toISOString().split('T')[0];
        }
        
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Update analytics when switching to analytics tab
            if (tabName === 'analytics') {
                updateAnalytics();
            }
        }
        
        function addApplication() {
            const application = {
                id: Date.now(),
                jobTitle: document.getElementById('jobTitle').value,
                company: document.getElementById('company').value,
                jobPortal: document.getElementById('jobPortal').value,
                jobUrl: document.getElementById('jobUrl').value,
                applicationDate: document.getElementById('applicationDate').value,
                status: document.getElementById('status').value,
                resumeVersion: document.getElementById('resumeVersion').value,
                location: document.getElementById('location').value,
                salaryRange: document.getElementById('salaryRange').value,
                jobType: document.getElementById('jobType').value,
                priority: document.getElementById('priority').value,
                notes: document.getElementById('notes').value,
                dateAdded: new Date().toISOString()
            };
            
            if (!application.jobTitle || !application.company) {
                alert('Please fill in required fields (Job Title and Company)');
                return;
            }
            
            applications.push(application);
            localStorage.setItem('jobApplications', JSON.stringify(applications));
            
            // Reset form
            document.querySelectorAll('#applications input, #applications select, #applications textarea').forEach(input => {
                if (input.type !== 'date') input.value = '';
                if (input.id === 'status') input.value = 'Applied';
                if (input.id === 'priority') input.value = 'Medium';
            });
            setDefaultDate();
            
            renderApplications();
            updateAnalytics();
            alert('Application added successfully!');
        }
        
        function renderApplications() {
            const tbody = document.getElementById('applicationsBody');
            tbody.innerHTML = '';
            
            applications.forEach(app => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${new Date(app.applicationDate).toLocaleDateString()}</td>
                    <td><strong>${app.jobTitle}</strong></td>
                    <td>${app.company}</td>
                    <td>${app.jobPortal}</td>
                    <td><span class="status-${app.status.toLowerCase().replace(' ', '-')}">${app.status}</span></td>
                    <td>${app.resumeVersion}</td>
                    <td>${app.priority}</td>
                    <td>
                        ${app.jobUrl ? `<a href="${app.jobUrl}" target="_blank">View Job</a> | ` : ''}
                        <a href="#" onclick="editApplication(${app.id})">Edit</a> |
                        <a href="#" onclick="deleteApplication(${app.id})" style="color: red;">Delete</a>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function addContact() {
            const contact = {
                id: Date.now(),
                name: document.getElementById('contactName').value,
                company: document.getElementById('contactCompany').value,
                position: document.getElementById('contactPosition').value,
                linkedinUrl: document.getElementById('linkedinUrl').value,
                email: document.getElementById('contactEmail').value,
                relationship: document.getElementById('relationship').value,
                status: document.getElementById('contactStatus').value,
                notes: document.getElementById('contactNotes').value,
                dateAdded: new Date().toISOString()
            };
            
            if (!contact.name) {
                alert('Please enter contact name');
                return;
            }
            
            contacts.push(contact);
            localStorage.setItem('jobContacts', JSON.stringify(contacts));
            
            // Reset form
            document.querySelectorAll('#contacts input, #contacts select, #contacts textarea').forEach(input => {
                input.value = '';
                if (input.id === 'relationship') input.value = 'Potential Referral';
                if (input.id === 'contactStatus') input.value = 'Not Contacted';
            });
            
            renderContacts();
            alert('Contact added successfully!');
        }
        
        function renderContacts() {
            const contactsList = document.getElementById('contactsList');
            contactsList.innerHTML = '';
            
            contacts.forEach(contact => {
                const card = document.createElement('div');
                card.className = 'contact-card';
                card.innerHTML = `
                    <h4>${contact.name} ${contact.position ? `- ${contact.position}` : ''}</h4>
                    <p><strong>Company:</strong> ${contact.company || 'Not specified'}</p>
                    <p><strong>Relationship:</strong> ${contact.relationship}</p>
                    <p><strong>Status:</strong> ${contact.status}</p>
                    ${contact.linkedinUrl ? `<p><a href="${contact.linkedinUrl}" target="_blank">LinkedIn Profile</a></p>` : ''}
                    ${contact.email ? `<p><strong>Email:</strong> ${contact.email}</p>` : ''}
                    ${contact.notes ? `<p><strong>Notes:</strong> ${contact.notes}</p>` : ''}
                    <p><small>Added: ${new Date(contact.dateAdded).toLocaleDateString()}</small></p>
                    <button class="btn btn-danger" onclick="deleteContact(${contact.id})">Delete</button>
                `;
                contactsList.appendChild(card);
            });
        }
        
        function updateAnalytics() {
            const totalApps = applications.length;
            const interviewStatuses = ['Phone Screen', 'Interview Scheduled', 'Final Interview'];
            const interviewApps = applications.filter(app => interviewStatuses.includes(app.status)).length;
            const responseStatuses = ['Under Review', 'Phone Screen', 'Interview Scheduled', 'Final Interview', 'Offer', 'Rejected'];
            const responseApps = applications.filter(app => responseStatuses.includes(app.status)).length;
            const offerApps = applications.filter(app => app.status === 'Offer').length;
            
            document.getElementById('totalApps').textContent = totalApps;
            document.getElementById('interviewRate').textContent = totalApps > 0 ? Math.round((interviewApps / totalApps) * 100) + '%' : '0%';
            document.getElementById('responseRate').textContent = totalApps > 0 ? Math.round((responseApps / totalApps) * 100) + '%' : '0%';
            document.getElementById('offerRate').textContent = totalApps > 0 ? Math.round((offerApps / totalApps) * 100) + '%' : '0%';
            
            updateCharts();
        }
        
        function updateCharts() {
            // Status Distribution Chart
            const statusCounts = {};
            applications.forEach(app => {
                statusCounts[app.status] = (statusCounts[app.status] || 0) + 1;
            });
            
            new Chart(document.getElementById('statusChart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(statusCounts),
                    datasets: [{
                        data: Object.values(statusCounts),
                        backgroundColor: ['#3498db', '#f39c12', '#27ae60', '#e74c3c', '#9b59b6', '#1abc9c', '#34495e', '#95a5a6']
                    }]
                }
            });
            
            // Applications Over Time
            const monthCounts = {};
            applications.forEach(app => {
                const month = new Date(app.applicationDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
                monthCounts[month] = (monthCounts[month] || 0) + 1;
            });
            
            new Chart(document.getElementById('timeChart'), {
                type: 'line',
                data: {
                    labels: Object.keys(monthCounts),
                    datasets: [{
                        label: 'Applications',
                        data: Object.values(monthCounts),
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4
                    }]
                }
            });
            
            // Portal Distribution
            const portalCounts = {};
            applications.forEach(app => {
                if (app.jobPortal) {
                    portalCounts[app.jobPortal] = (portalCounts[app.jobPortal] || 0) + 1;
                }
            });
            
            new Chart(document.getElementById('portalChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(portalCounts),
                    datasets: [{
                        label: 'Applications',
                        data: Object.values(portalCounts),
                        backgroundColor: '#3498db'
                    }]
                }
            });
        }
        
        function deleteApplication(id) {
            if (confirm('Are you sure you want to delete this application?')) {
                applications = applications.filter(app => app.id !== id);
                localStorage.setItem('jobApplications', JSON.stringify(applications));
                renderApplications();
                updateAnalytics();
            }
        }
        
        function deleteContact(id) {
            if (confirm('Are you sure you want to delete this contact?')) {
                contacts = contacts.filter(contact => contact.id !== id);
                localStorage.setItem('jobContacts', JSON.stringify(contacts));
                renderContacts();
            }
        }
        
        function exportToExcel() {
            const wb = XLSX.utils.book_new();
            
            // Applications sheet
            const appWs = XLSX.utils.json_to_sheet(applications);
            XLSX.utils.book_append_sheet(wb, appWs, "Applications");
            
            // Contacts sheet
            const contactWs = XLSX.utils.json_to_sheet(contacts);
            XLSX.utils.book_append_sheet(wb, contactWs, "Contacts");
            
            // Save file
            XLSX.writeFile(wb, `Job_Tracker_${new Date().toISOString().split('T')[0]}.xlsx`);
        }
        
        function exportReport() {
            const totalApps = applications.length;
            const interviewRate = totalApps > 0 ? Math.round((applications.filter(app => ['Phone Screen', 'Interview Scheduled', 'Final Interview'].includes(app.status)).length / totalApps) * 100) : 0;
            
            const reportData = [{
                'Total Applications': totalApps,
                'Interview Rate': interviewRate + '%',
                'Total Contacts': contacts.length,
                'Report Date': new Date().toLocaleDateString()
            }];
            
            const wb = XLSX.utils.book_new();
            const reportWs = XLSX.utils.json_to_sheet(reportData);
            const appWs = XLSX.utils.json_to_sheet(applications);
            const contactWs = XLSX.utils.json_to_sheet(contacts);
            
            XLSX.utils.book_append_sheet(wb, reportWs, "Summary");
            XLSX.utils.book_ -->